var splashyfish=function(e){function n(e){this.direction=S++%2===0?"up":"down",this.length=e,this.x=g}function t(){setTimeout(function(){if(w){var e=c(0,x-V);P.push(new n(e)),P.push(new n(x-e-V))}t()},b)}function l(){w=!0,t(),I.image=document.createElement("img"),I.image.src="img/sprites.png",I.image.style.display="none",document.body.appendChild(I.image)}function o(){w&&(I.angle=I.yVel,I.yVel=8,u("jump.mp3"),v=!1)}function a(){P=[],E=0,w=!0,I.yVel=0,I.y=x/2,I.x=g/4,T=[{x:I.x,y:I.y}],v=!1}function c(e,n){return Math.floor(Math.random()*(n-e+1))+e}function f(e,n,t,i){var l=m.fillStyle;m.beginPath(),m.arc(e,n,t,0,2*Math.PI,!1),m.fillStyle=i,m.fill(),m.fillStyle=l}function d(e,n,t,i){var l=m.fillStyle;m.fillStyle=i,m.font="16px 'Press Start 2P'",m.fillText(e,n,t),m.fillStyle=l}function r(e,n){I.angle=5e5*I.yVel,console.log(I.angle);var t=I.wings?0:240;m.translate(e,n),m.rotate(I.angle*Math.PI/180),m.drawImage(I.image,t,0,240,240,-16,-16,32,32),m.rotate(-I.angle*Math.PI/180),m.translate(-e,-n)}function u(e){var n=document.createElement("audio"),t=document.createElement("source");t.type="audio/mpeg",t.src="snd/"+e,n.appendChild(t),document.body.appendChild(n),n.volume=.5,n.play(),setTimeout(function(){document.body.removeChild(n)},800)}var e=document.getElementById(e);e.width=window.innerWidth,e.height=400;var y,s,h,m=e.getContext("2d"),g=e.width,x=e.height,p=50,w=!0,v=!1,S=0,V=200,b=1e3,E=0,I={x:g/4,y:x/2,yVel:0,angle:0,image:null,wings:!0,speed:5},P=[],T=[{x:I.x,y:I.y}];setInterval(function(){I.wings=!I.wings},100),setInterval(function(){I.angle=I.yVel},20),setInterval(function(){T.push({x:I.x,y:I.y})},25),l(),e.addEventListener("mousedown",function(e){1===e.which?o():2===e.which&&(w=!0,v=!0)},!1),window.addEventListener("keydown",function(e){32===e.which&&o(),13===e.which&&a()},!1),e.addEventListener("mousemove",function(e){y=e.x,s=e.y},!1),function k(){if(requestAnimationFrame(k),w){m.fillStyle="black",m.fillRect(0,0,g,x),r(I.x,I.y);var e=I.y-16,n=I.y+16,t=I.x+16,l=I.x-16;for(m.beginPath(),m.moveTo(T[0].x,T[0].y),i=0;i<T.length-2;i++)if(T[i].x<=-10)T.splice(T.indexOf(T[i]),1);else{var o=(T[i].x+T[i+1].x)/2,a=(T[i].y+T[i+1].y)/2;m.lineTo(T[i].x,T[i].y,o,a),T[i].x-=I.speed}m.lineWidth=3,m.strokeStyle="#ff0000",m.stroke(),P.forEach(function(i){var o;switch(i.direction){default:case"up":o=x-i.length,m.fillStyle="red";break;case"down":o=0,m.fillStyle="blue"}m.fillRect(i.x,o,p,i.length),t>=i.x&&l<i.x+p&&(clearTimeout(h),h=setTimeout(function(){E++},100),("down"===i.direction&&e<=i.length||"up"===i.direction&&n>=x-i.length)&&(w=!1)),i.x-=I.speed}),d(E,g-32,32,"#ffffff"),v&&(f(I.x,e,2,"yellow"),f(I.x,n,2,"cyan"),f(l,I.y,2,"pink"),f(t,I.y,2,"lime")),v?(I.x=y,I.y=s):(I.y+=I.yVel,I.yVel=I.yVel/.981-.5),(0>=e||n>=x)&&(w=!1)}}()};