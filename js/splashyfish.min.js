var splashyfish=function(e){function t(e){this.direction=S++%2===0?"up":"down",this.length=e,this.x=x}function n(){setTimeout(function(){if(w){var e=d(0,p-E);I.push(new t(e)),I.push(new t(p-e-E))}n()},V)}function l(){w=!0,n(),C.image=document.createElement("img"),C.image.src="img/sprites.png",C.image.style.display="none",document.body.appendChild(C.image)}function o(){w&&(C.angle=C.yVel,C.yVel=8,y("jump.mp3"),v=!1)}function a(){I=[],b=0,w=!0,C.yVel=0,C.y=p/2,C.x=x/4,P=[{x:C.x,y:C.y}],v=!1}function d(e,t){return Math.floor(Math.random()*(t-e+1))+e}function c(e,t,i,n){var l=m.fillStyle;m.beginPath(),m.arc(e,t,i,0,2*Math.PI,!1),m.fillStyle=n,m.fill(),m.fillStyle=l}function r(e,t,i,n){var l=m.fillStyle;m.fillStyle=n,m.font="24px 'Press Start 2P'",m.fillText(e,t,i),m.fillStyle=l}function f(e,t){var i=2*C.yVel,n=C.wings?0:240;m.translate(e,t),m.rotate(i*Math.PI/180),m.drawImage(C.image,n,0,240,240,-16,-16,32,32),m.rotate(-i*Math.PI/180),m.translate(-e,-t)}function y(e){var t=document.createElement("audio"),i=document.createElement("source");i.type="audio/mpeg",i.src="snd/"+e,t.appendChild(i),document.body.appendChild(t),t.volume=.5,t.play(),setTimeout(function(){document.body.removeChild(t)},800)}var e=document.getElementById(e);e.width=window.innerWidth,e.height=400;var u,s,h,m=e.getContext("2d"),x=e.width,p=e.height,g=50,w=!0,v=!1,S=0,E=200,V=1e3,b=0,C={x:x/4,y:p/2,yVel:0,image:null,wings:!0,speed:5},I=[],P=[{x:C.x,y:C.y}];setInterval(function(){C.wings=!C.wings},100),setInterval(function(){P.push({x:C.x,y:C.y})},25),l(),e.addEventListener("mousedown",function(e){1===e.which?o():2===e.which&&(P=[{x:C.x,y:C.y}],w=!0,v=!0)},!1),window.addEventListener("keydown",function(e){32===e.which&&o(),13===e.which&&a()},!1),e.addEventListener("mousemove",function(e){u=e.x,s=e.y},!1),function T(){if(requestAnimationFrame(T),w){var e=m.createLinearGradient(0,0,0,p);e.addColorStop(0,"#2980b9"),e.addColorStop(1,"#34495e"),m.fillStyle=e,m.fillRect(0,0,x,p),f(C.x,C.y);var t=C.y-16,n=C.y+16,l=C.x+16,o=C.x-16;if(v){for(m.beginPath(),m.moveTo(P[0].x,P[0].y),i=0;i<P.length-2;i++)if(P[i].x<=-10)P.splice(P.indexOf(P[i]),1);else{var a=(P[i].x+P[i+1].x)/2,d=(P[i].y+P[i+1].y)/2;m.lineTo(P[i].x,P[i].y,a,d),P[i].x-=C.speed}m.lineWidth=3,m.strokeStyle="#ff0000",m.stroke()}I.forEach(function(e){if(e.x>=0-g){var i;switch(e.direction){default:case"up":i=p-e.length,m.fillStyle="#27ae60";break;case"down":i=0,m.fillStyle="#2ecc71"}m.fillRect(e.x,i,g,e.length),l>=e.x&&o<e.x+g&&(clearTimeout(h),h=setTimeout(function(){b++},100),("down"===e.direction&&t<=e.length||"up"===e.direction&&n>=p-e.length)&&(w=!1)),e.x-=C.speed}}),r(b,x-64,64,"#ffffff"),v&&(c(C.x,t,2,"yellow"),c(C.x,n,2,"cyan"),c(o,C.y,2,"pink"),c(l,C.y,2,"lime")),v?(C.x=u,C.y=s):(C.y+=C.yVel,C.yVel=C.yVel/.981-.5),(0>=t||n>=p)&&(w=!1)}}()};