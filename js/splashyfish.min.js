var splashyfish=function(e){function t(e){this.direction=S++%2===0?"up":"down",this.length=e,this.x=m}function n(){setTimeout(function(){if(p&&P){var e=f(0,w-V);k.push(new t(e)),k.push(new t(w-e-V))}n()},E)}function l(){n(),T.image=document.createElement("img"),T.image.src="img/sprites.png"}function o(){p&&(P=!0,T.yVel=8,d("jump.mp3"),v=!1)}function a(){k=[],I=0,p=!0,T.yVel=0,T.y=w/2,T.x=m/4,L=[{x:T.x,y:T.y}],v=!1}function f(e,t){return Math.floor(Math.random()*(t-e+1))+e}function r(e,t,i,n){var l=x.fillStyle;x.beginPath(),x.arc(e,t,i,0,2*Math.PI,!1),x.fillStyle=n,x.fill(),x.fillStyle=l}function y(e,t,i,n){var l=x.fillStyle;x.fillStyle=n,x.font="24px 'Press Start 2P'",x.fillText(e,t,i),x.fillStyle=l}function c(e,t){var i=2*T.yVel,n=T.wings?0:240;x.translate(e,t),x.rotate(i*Math.PI/180),x.drawImage(T.image,n,0,240,240,-16,-16,32,32),x.rotate(-i*Math.PI/180),x.translate(-e,-t)}function d(e){var t="snd/"+e,i=new Audio(t);i.addEventListener("loadedmetadata",function(){i.play()},!1)}var e=document.getElementById(e);e.width=window.innerWidth,e.height=400;var s,u,h,x=e.getContext("2d"),m=e.width,w=e.height,g=50,p=!0,v=!1,S=0,V=200,E=1e3,I=0,P=!1,T={x:m/4,y:w/2,yVel:0,image:null,wings:!0,speed:5},k=[],L=[{x:T.x,y:T.y}];setInterval(function(){T.wings=!T.wings},100),setInterval(function(){v&&L.push({x:T.x,y:T.y})},25),l(),e.addEventListener("mousedown",function(e){1===e.which?o():2===e.which&&(L=[{x:T.x,y:T.y}],p=!0,v=!0)},!1),window.addEventListener("keydown",function(e){32===e.which&&o(),13===e.which&&a()},!1),e.addEventListener("mousemove",function(e){s=e.x,u=e.y},!1),function M(){if(requestAnimationFrame(M),p){var e=x.createLinearGradient(0,0,0,w);e.addColorStop(0,"#2980b9"),e.addColorStop(1,"#34495e"),x.fillStyle=e,x.fillRect(0,0,m,w),c(T.x,T.y);var t=T.y-16,n=T.y+16,l=T.x+16,o=T.x-16;if(v){for(x.beginPath(),x.moveTo(L[0].x,L[0].y),i=0;i<L.length-2;i++)if(L[i].x<=-10)L.splice(L.indexOf(L[i]),1);else{var a=(L[i].x+L[i+1].x)/2,f=(L[i].y+L[i+1].y)/2;x.lineTo(L[i].x,L[i].y,a,f),L[i].x-=T.speed}x.lineWidth=3,x.strokeStyle="#ff0000",x.stroke()}x.fillStyle="#27ae60",k.forEach(function(e){if(e.x>=0-g){var i;switch(e.direction){default:case"up":i=w-e.length;break;case"down":i=0}x.fillRect(e.x,i,g,e.length),l>=e.x&&o<e.x+g&&(clearTimeout(h),h=setTimeout(function(){I++},100),("down"===e.direction&&t<=e.length||"up"===e.direction&&n>=w-e.length)&&(p=!1)),e.x-=T.speed}}),y(I,m-64,64,"#ffffff"),v&&(r(T.x,t,2,"yellow"),r(T.x,n,2,"cyan"),r(o,T.y,2,"pink"),r(l,T.y,2,"lime")),v?(T.x=s,T.y=u):P?(T.y+=T.yVel,T.yVel=T.yVel/.981-.5):(T.y=T.y,T.yVel=0),(0>=t||n>=w)&&(p=!1)}}()};
//# sourceMappingURL=splashyfish.min.js.map