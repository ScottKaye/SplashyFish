var splashyfish=function(e){function t(e){this.direction=I++%2===0?"up":"down",this.length=e,this.x=w}function n(){setTimeout(function(){if(T&&M){var e=f(0,p-E);A.push(new t(e)),A.push(new t(p-e-E))}n()},P)}function a(){n(),C.image=document.createElement("img"),C.image.src="img/sprites.png"}function l(){T&&!C.dead&&(M=!0,C.yVel=8,u("jump.mp3"))}function o(){A=[],k=0,T=!0,C.dead=!1,M=!1,C.yVel=0,C.y=p/2,C.x=w/4,C.angle=0,F=[{x:C.x,y:C.y}],V=!1,clearTimeout(m)}function f(e,t){return Math.floor(Math.random()*(t-e+1))+e}function d(e,t){return Math.random()*(t-e+1)+e}function r(e,t,n,i){var a=v.fillStyle;v.beginPath(),v.arc(e,t,n,0,2*Math.PI,!1),v.fillStyle=i,v.fill(),v.fillStyle=a}function c(e,t,n,i,a){var l=v.fillStyle;v.fillStyle=i,v.font=a+"px 'Press Start 2P'",v.fillText(e,t,n),v.fillStyle=l}function y(e,t){C.dead||(C.angle=2*C.yVel);var n=C.wings?0:240;v.translate(e,t),v.rotate(C.angle*Math.PI/180),v.drawImage(C.image,n,0,240,240,-16,-16,32,32),v.rotate(-C.angle*Math.PI/180),v.translate(-e,-t)}function s(){var e=5,t=setInterval(function(){var t=d(-1*e,e),n=d(-1*e,e);v.translate(t,n)},20);setTimeout(function(){clearInterval(t),v.setTransform(1,0,0,1,0,0)},500)}function u(e){var t="snd/"+e,n=new Audio(t);n.addEventListener("loadedmetadata",function(){n.play()},!1)}function h(){C.dead||(s(),C.yVel=-1,C.dead=!0)}var e=document.getElementById(e);e.width=window.innerWidth,e.height=400;var g,x,m,v=e.getContext("2d"),w=e.width,p=e.height,S=50,T=!0,V=!1,I=0,E=200,P=1e3,k=0,M=!1,b="Splashy Fish!",L="Click or Tap Spacebar to Dive!",C={x:w/4,y:p/2,yVel:0,image:null,wings:!0,speed:5,angle:0,dead:!1},A=[],F=[{x:C.x,y:C.y}];setInterval(function(){C.wings=C.dead?!0:!C.wings},100),setInterval(function(){V&&F.push({x:C.x,y:C.y})},25),a(),e.addEventListener("mousedown",function(e){1===e.which?l():2===e.which&&(F=[{x:C.x,y:C.y}],T=!0,V=!V)},!1),window.addEventListener("keydown",function(e){32===e.which&&l(),13===e.which&&o()},!1),e.addEventListener("mousemove",function(e){g=e.x,x=e.y},!1),function R(){if(requestAnimationFrame(R),T){var e=v.createLinearGradient(0,0,0,p);e.addColorStop(0,"#2980b9"),e.addColorStop(1,"#34495e"),v.fillStyle=e,v.fillRect(0,0,w,p);var t=C.y-16,n=C.y+16,a=C.x+16,l=C.x-16;if(V){for(v.beginPath(),v.moveTo(F[0].x,F[0].y),i=0;i<F.length-2;i++)if(F[i].x<=-10)F.splice(F.indexOf(F[i]),1);else{var o=(F[i].x+F[i+1].x)/2,f=(F[i].y+F[i+1].y)/2;v.lineTo(F[i].x,F[i].y,o,f),M&&!C.dead&&(F[i].x-=C.speed)}v.lineWidth=3,v.strokeStyle="#ff0000",v.stroke()}v.fillStyle="#27ae60",A.forEach(function(e){if(e.x>=0-S){var i;switch(e.direction){default:case"up":i=p-e.length;break;case"down":i=0}v.fillRect(e.x,i,S,e.length),a>=e.x&&l<e.x+S&&(clearTimeout(m),m=setTimeout(function(){k+=100},100),("down"===e.direction&&t<=e.length||"up"===e.direction&&n>=p-e.length)&&h()),C.dead||(e.x-=C.speed)}}),y(C.x,C.y),c(k,w-24*k.toString().length-32,64,"#ffffff",24),M||(c(b,w/2-24*b.toString().length,64,"#ffffff",24),c(L,w/2-640,240,"#ffffff",16)),V&&(r(C.x,t,2,"yellow"),r(C.x,n,2,"cyan"),r(l,C.y,2,"pink"),r(a,C.y,2,"lime")),M||C.dead?(C.y+=C.yVel,C.yVel=C.yVel/.981-.5):(C.y=C.y,C.yVel=0),(0>=t||n>=p)&&h(),0>=t&&C.dead&&(C.y=16,C.yVel=0,C.angle=180)}}()};
//# sourceMappingURL=splashyfish.min.js.map