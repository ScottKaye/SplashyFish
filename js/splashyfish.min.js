var splashyfish=function(e){function t(e){this.direction=V++%2===0?"up":"down",this.length=e,this.x=m}function n(){setTimeout(function(){if(v&&T){var e=d(0,w-E);L.push(new t(e)),L.push(new t(w-e-E))}n()},I)}function l(){n(),k.image=document.createElement("img"),k.image.src="img/sprites.png"}function a(){v&&!k.dead&&(T=!0,k.yVel=8,c("jump.mp3"),S=!1)}function o(){L=[],P=0,v=!0,k.dead=!1,T=!0,k.yVel=0,k.y=w/2,k.x=m/4,k.angle=0,M=[{x:k.x,y:k.y}],S=!1}function d(e,t){return Math.floor(Math.random()*(t-e+1))+e}function f(e,t,n,i){var l=g.fillStyle;g.beginPath(),g.arc(e,t,n,0,2*Math.PI,!1),g.fillStyle=i,g.fill(),g.fillStyle=l}function r(e,t,n,i){var l=g.fillStyle;g.fillStyle=i,g.font="24px 'Press Start 2P'",g.fillText(e,t,n),g.fillStyle=l}function y(e,t){k.dead||(k.angle=2*k.yVel);var n=k.wings?0:240;g.translate(e,t),g.rotate(k.angle*Math.PI/180),g.drawImage(k.image,n,0,240,240,-16,-16,32,32),g.rotate(-k.angle*Math.PI/180),g.translate(-e,-t)}function c(e){var t="snd/"+e,n=new Audio(t);n.addEventListener("loadedmetadata",function(){n.play()},!1)}function s(){k.yVel=-1,k.dead=!0}var e=document.getElementById(e);e.width=window.innerWidth,e.height=400;var u,h,x,g=e.getContext("2d"),m=e.width,w=e.height,p=50,v=!0,S=!1,V=0,E=200,I=1e3,P=0,T=!1,k={x:m/4,y:w/2,yVel:0,image:null,wings:!0,speed:5,angle:0,dead:!1},L=[],M=[{x:k.x,y:k.y}];setInterval(function(){k.wings=k.dead?!0:!k.wings},100),setInterval(function(){S&&M.push({x:k.x,y:k.y})},25),l(),e.addEventListener("mousedown",function(e){1===e.which?a():2===e.which&&(M=[{x:k.x,y:k.y}],v=!0,S=!0)},!1),window.addEventListener("keydown",function(e){32===e.which&&a(),13===e.which&&o()},!1),e.addEventListener("mousemove",function(e){u=e.x,h=e.y},!1),function b(){if(requestAnimationFrame(b),v){var e=g.createLinearGradient(0,0,0,w);e.addColorStop(0,"#2980b9"),e.addColorStop(1,"#34495e"),g.fillStyle=e,g.fillRect(0,0,m,w),y(k.x,k.y);var t=k.y-16,n=k.y+16,l=k.x+16,a=k.x-16;if(S){for(g.beginPath(),g.moveTo(M[0].x,M[0].y),i=0;i<M.length-2;i++)if(M[i].x<=-10)M.splice(M.indexOf(M[i]),1);else{var o=(M[i].x+M[i+1].x)/2,d=(M[i].y+M[i+1].y)/2;g.lineTo(M[i].x,M[i].y,o,d),T&&(M[i].x-=k.speed)}g.lineWidth=3,g.strokeStyle="#ff0000",g.stroke()}g.fillStyle="#27ae60",L.forEach(function(e){if(e.x>=0-p){var i;switch(e.direction){default:case"up":i=w-e.length;break;case"down":i=0}g.fillRect(e.x,i,p,e.length),l>=e.x&&a<e.x+p&&(clearTimeout(x),x=setTimeout(function(){P+=50},100),("down"===e.direction&&t<=e.length||"up"===e.direction&&n>=w-e.length)&&s()),k.dead||(e.x-=k.speed)}}),r(P,m-24*P.toString().length-32,64,"#ffffff"),S&&(f(k.x,t,2,"yellow"),f(k.x,n,2,"cyan"),f(a,k.y,2,"pink"),f(l,k.y,2,"lime")),S?(k.x=u,k.y=h):T||k.dead?(k.y+=k.yVel,k.yVel=k.yVel/.981-.5):(k.y=k.y,k.yVel=0),(0>=t||n>=w)&&s(),0>=t&&k.dead&&(k.y=16,k.yVel=0,k.angle=180)}}()};
//# sourceMappingURL=splashyfish.min.js.map