var splashyfish=function(e){function t(e){this.direction=V++%2===0?"up":"down",this.length=e,this.x=m}function n(){setTimeout(function(){if(v&&T){var e=f(0,w-E);M.push(new t(e)),M.push(new t(w-e-E))}n()},I)}function l(){n(),L.image=document.createElement("img"),L.image.src="img/sprites.png"}function o(){v&&(T=!0,L.yVel=8,d("jump.mp3"),S=!1)}function a(){M=[],P=0,v=!0,L.yVel=0,L.y=w/2,L.x=m/4,b=[{x:L.x,y:L.y}],S=!1}function f(e,t){return Math.floor(Math.random()*(t-e+1))+e}function r(e,t,i,n){var l=g.fillStyle;g.beginPath(),g.arc(e,t,i,0,2*Math.PI,!1),g.fillStyle=n,g.fill(),g.fillStyle=l}function y(e,t,i,n){var l=g.fillStyle;g.fillStyle=n,g.font="24px 'Press Start 2P'",g.fillText(e,t,i),g.fillStyle=l}function c(e,t){var i=2*L.yVel,n=L.wings?0:240;g.translate(e,t),g.rotate(i*Math.PI/180),g.drawImage(L.image,n,0,240,240,-16,-16,32,32),g.rotate(-i*Math.PI/180),g.translate(-e,-t)}function d(e){var t="snd/"+e,i=new Audio(t);i.addEventListener("loadedmetadata",function(){i.play()},!1)}function s(){L.yVel=0,T=!1}var e=document.getElementById(e);e.width=window.innerWidth,e.height=400;var u,h,x,g=e.getContext("2d"),m=e.width,w=e.height,p=50,v=!0,S=!1,V=0,E=200,I=1e3,P=0,T=!1,k=!1,L={x:m/4,y:w/2,yVel:0,image:null,wings:!0,speed:5},M=[],b=[{x:L.x,y:L.y}];setInterval(function(){L.wings=!L.wings},100),setInterval(function(){S&&b.push({x:L.x,y:L.y})},25),l(),e.addEventListener("mousedown",function(e){1===e.which?o():2===e.which&&(b=[{x:L.x,y:L.y}],v=!0,S=!0)},!1),window.addEventListener("keydown",function(e){32===e.which&&o(),13===e.which&&a()},!1),e.addEventListener("mousemove",function(e){u=e.x,h=e.y},!1),function C(){if(requestAnimationFrame(C),v){var e=g.createLinearGradient(0,0,0,w);e.addColorStop(0,"#2980b9"),e.addColorStop(1,"#34495e"),g.fillStyle=e,g.fillRect(0,0,m,w),c(L.x,L.y);var t=L.y-16,n=L.y+16,l=L.x+16,o=L.x-16;if(S){for(g.beginPath(),g.moveTo(b[0].x,b[0].y),i=0;i<b.length-2;i++)if(b[i].x<=-10)b.splice(b.indexOf(b[i]),1);else{var a=(b[i].x+b[i+1].x)/2,f=(b[i].y+b[i+1].y)/2;g.lineTo(b[i].x,b[i].y,a,f),b[i].x-=L.speed}g.lineWidth=3,g.strokeStyle="#ff0000",g.stroke()}g.fillStyle="#27ae60",M.forEach(function(e){if(e.x>=0-p){var i;switch(e.direction){default:case"up":i=w-e.length;break;case"down":i=0}g.fillRect(e.x,i,p,e.length),l>=e.x&&o<e.x+p&&(clearTimeout(x),x=setTimeout(function(){P+=50},100),("down"===e.direction&&t<=e.length||"up"===e.direction&&n>=w-e.length)&&s()),k||(e.x-=L.speed)}}),y(P,m-24*P.toString().length-32,64,"#ffffff"),S&&(r(L.x,t,2,"yellow"),r(L.x,n,2,"cyan"),r(o,L.y,2,"pink"),r(l,L.y,2,"lime")),S?(L.x=u,L.y=h):T||k?(L.y+=L.yVel,L.yVel=L.yVel/.981-.5):(L.y=L.y,L.yVel=0),(0>=t||n>=w)&&s()}}()};
//# sourceMappingURL=splashyfish.min.js.map